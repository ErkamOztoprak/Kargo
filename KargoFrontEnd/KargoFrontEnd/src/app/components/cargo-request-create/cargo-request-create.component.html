<div class="shared-background-theme">
<main class="container my-5 ">
    <div class="row justify-content-center ">
        <div class="col-lg-8 col-md-10 cargo-form-theme"> 
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title mb-0 text-center">Yeni Kargo Teslimat Talebi</h4>
                </div>
                <div class="card-body p-4">
                    <form #cargoRequestForm="ngForm" (ngSubmit)="submitCargoRequest(cargoRequestForm)">

                       
                        <h5 class="mt-2 mb-3 section-title">Gönderici Bilgileri</h5>
                        <!-- <div class="mb-3">
                            <label for="senderName" class="form-label">Ad Soyad (Gönderen)</label>
                            <input type="text" class="form-control" id="senderName" name="senderName" [(ngModel)]="requestData.sender.name" required #senderNameInput="ngModel" placeholder="Adınız Soyadınız">
                            <div *ngIf="senderNameInput.invalid && (senderNameInput.dirty || senderNameInput.touched)" class="text-danger mt-1 small">
                                Gönderici adı gereklidir.
                            </div>
                        </div> -->
                        <div class="mb-3">
                            <label for="senderContact" class="form-label">İletişim (Oda No/Telefon)</label>
                            <input type="text" class="form-control" id="senderContact" name="senderContact" [(ngModel)]="requestData.sender.contactInfo" required #senderContactInput="ngModel" placeholder="Yurt Oda No veya Telefon">
                            <div *ngIf="senderContactInput.invalid && (senderContactInput.dirty || senderContactInput.touched)" class="text-danger mt-1 small">
                                Gönderici iletişim bilgisi gereklidir.
                            </div>
                        </div>

                       
                        <h5 class="mt-4 mb-3 section-title">Alıcı Bilgileri</h5>
                        <div class="mb-3">
                            <label for="receiverName" class="form-label">Ad Soyad (Alıcı)</label>
                            <input type="text" class="form-control" id="receiverName" name="receiverName" [(ngModel)]="requestData.receiver.name" required #receiverNameInput="ngModel" placeholder="Kargoyu teslim alacak kişinin adı soyadı">
                            <div *ngIf="receiverNameInput.invalid && (receiverNameInput.dirty || receiverNameInput.touched)" class="text-danger mt-1 small">
                                Alıcı adı gereklidir.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="receiverContact" class="form-label">Alıcı İletişim (Oda No/Telefon)</label>
                            <input type="text" class="form-control" id="receiverContact" name="receiverContact" [(ngModel)]="requestData.receiver.contactInfo" required #receiverContactInput="ngModel" placeholder="Teslim alacak kişinin oda no veya telefonu">
                            <div *ngIf="receiverContactInput.invalid && (receiverContactInput.dirty || receiverContactInput.touched)" class="text-danger mt-1 small">
                                Alıcı iletişim bilgisi gereklidir.
                            </div>
                        </div>

                       
                        <h5 class="mt-4 mb-3 section-title">Kargo Detayları</h5>
                        <div class="mb-3">
                            <label for="cargoDescription" class="form-label">Kargo İçeriği / Açıklama</label>
                            <input type="text" class="form-control" id="cargoDescription" name="cargoDescription" [(ngModel)]="requestData.cargo.description" required #cargoDescriptionInput="ngModel" placeholder="Örn: Kitap, Küçük Paket, Zarf">
                            <div *ngIf="cargoDescriptionInput.invalid && (cargoDescriptionInput.dirty || cargoDescriptionInput.touched)" class="text-danger mt-1 small">
                                Kargo açıklaması gereklidir.
                            </div>
                        </div>
                        <div class="mb-3"> 
                            <label for="pickupLocation" class="form-label">Kargonun Alınacağı Yer</label>
                            <input type="text" class="form-control" id="pickupLocation" name="pickupLocation" [(ngModel)]="requestData.cargo.pickupLocation" required #pickupLocationInput="ngModel" placeholder="Örn: A Blok Güvenlik, Kütüphane Emanet">
                             <div *ngIf="pickupLocationInput.invalid && (pickupLocationInput.dirty || pickupLocationInput.touched)" class="text-danger mt-1 small">
                                Kargonun alınacağı yer gereklidir.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="deliveryLocation" class="form-label">Teslim Edileceği Yer</label>
                            <input type="text" class="form-control" id="deliveryLocation" name="deliveryLocation" [(ngModel)]="requestData.cargo.deliveryLocation" required #deliveryLocationInput="ngModel" placeholder="Örn: B Blok, Oda 305">
                             <div *ngIf="deliveryLocationInput.invalid && (deliveryLocationInput.dirty || deliveryLocationInput.touched)" class="text-danger mt-1 small">
                                Teslim edileceği yer gereklidir.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="specialInstructions" class="form-label">Teslim Alacak Kişiye Not (Opsiyonel)</label>
                            <textarea class="form-control" id="specialInstructions" name="specialInstructions" rows="2" [(ngModel)]="requestData.cargo.specialInstructions" placeholder="Örn: Gelmeden önce ara, Akşam 6'dan sonra teslim alabilirim."></textarea>
                        </div>
                        
                        
                        <div class="mb-3">
                            <label for="proposedFee" class="form-label">Teslimat İçin Önerilen Ücret (₺ - Opsiyonel)</label>
                            <input type="number" class="form-control" id="proposedFee" name="proposedFee" [(ngModel)]="requestData.payment.proposedFee" min="0" step="1" placeholder="0">
                        </div>

                        <!-- Buton -->
                        <div class="text-center mt-4 pt-2">
                            <button type="submit" class="btn btn-primary btn-lg px-5" [disabled]="cargoRequestForm.form.invalid || isLoading">Teslimat Talebi Oluştur
                                <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                <span *ngIf="!isLoading">Kargo Talebi Oluştur</span>    
                                <span *ngIf="isLoading"> Gönderiliyor...</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
</div>