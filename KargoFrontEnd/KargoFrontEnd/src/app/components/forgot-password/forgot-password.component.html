<div class="outer">
  <div class="card">
    <div class="card-header">
      <img src="assets/images/logo.png" alt="Logo" class="logo-large">
      <h3 class="card-title">Şifremi Unuttum</h3>
    </div>
    <div class="card-body">

      <!-- Form Alanı (messageSent false iken görünür) -->
      <div *ngIf="!messageSent">
        <p class="info-text">
          Şifrenizi sıfırlamak için lütfen kayıtlı e-posta adresinizi girin.
          Size bir sıfırlama bağlantısı göndereceğiz.
        </p>
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
          <div class="input-field mb-3">
            <i class="fas fa-envelope"></i>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="form-control"
              placeholder="E-posta Adresiniz"
              [ngClass]="{ 'is-invalid': emailControl?.touched && emailControl?.invalid }"
            />
          </div>
          <!-- Hata Mesajları Alanı -->
          <div *ngIf="emailControl?.touched && emailControl?.invalid" class="mb-3">
            <small *ngIf="emailControl?.errors?.['required']" class="text-danger d-block">
              * E-posta adresi gereklidir.
            </small>
            <small *ngIf="emailControl?.errors?.['email']" class="text-danger d-block">
              * Geçerli bir e-posta adresi giriniz.
            </small>
          </div>

          <button type="submit" class="btn btn-primary w-100 mt-3" [disabled]="forgotPasswordForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            <span *ngIf="!isLoading">Sıfırlama Linki Gönder</span>
            <span *ngIf="isLoading">Gönderiliyor...</span>
          </button>
        </form>
      </div>

      <!-- Başarı Mesajı Alanı (messageSent true iken görünür) -->
      <div *ngIf="messageSent" class="text-center">
        <div class="alert alert-success mt-3" role="alert">
          <i class="fas fa-check-circle fa-2x mb-2 d-block text-success"></i>
          <h4 class="alert-heading">E-posta Gönderildi!</h4>
          <p>
            Eğer <strong>{{ submittedEmail }}</strong> adresi sistemimizde kayıtlıysa, şifre sıfırlama talimatlarını içeren bir e-posta gönderilmiştir.
            Lütfen gelen kutunuzu ve spam (istenmeyen) klasörünüzü kontrol edin.
          </p>
          <hr>
          <p class="mb-0">
            E-postayı bulamıyorsanız veya sorun yaşamaya devam ediyorsanız, lütfen destek ekibimizle iletişime geçin.
          </p>
        </div>
      </div>

      <!-- Giriş Ekranına Dön Linki -->
      <div class="login-link mt-4 text-center">
        <button type="button" class="btn btn-link" (click)="navigateToLogin()">Giriş Ekranına Dön</button>
        <!-- Alternatif olarak routerLink kullanılabilir: -->
        <!-- <a routerLink="/login" class="btn btn-link">Giriş Ekranına Dön</a> -->
      </div>

    </div> <!-- card-body kapanışı -->
  </div> <!-- card kapanışı -->
</div> <!-- outer kapanışı -->

<div class="footer">
  <p>&copy; 2025 Kargo Yönetim Sistemi. Tüm Hakları Saklıdır.</p>
</div>

